<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>TODOã‚¢ãƒ—ãƒª</title>
</head>

<body>
    <h1>TODOãƒªã‚¹ãƒˆ</h1>
    <button onclick="toggleTheme()" id="theme-button">ğŸŒ™ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰</button>

    <!-- ã‚¿ã‚¹ã‚¯ä¸€è¦§è¡¨ç¤º -->
    <ul>
        {% for task in tasks %}
        <li class="{% if task[2] == 1 %}done{% endif %}">
            <div>
              {% if task[2] == 1 %}
                <span class="task-text done-text">{{ task[1] }}</span>
              {% else %}
                <span class="task-text">{{ task[1] }}</span>
              {% endif %}
          
              {% if task[3] %}
                {% if task[3] < today %}
                  <span class="overdue">ï¼ˆæœŸé™: {{ task[3] }}ï¼‰</span>
                {% else %}
                  <span class="deadline">ï¼ˆæœŸé™: {{ task[3] }}ï¼‰</span>
                {% endif %}
              {% endif %}
          
              {% if task[4] %}
                <div class="memo">ğŸ“ {{ task[4] }}</div>
              {% endif %}
            </div>
          
            <div>
              <form action="/done/{{ task[0] }}" method="POST" style="display:inline;">
                <button type="submit">
                  {% if task[2] == 1 %}
                    æœªå®Œäº†ã«æˆ»ã™
                  {% else %}
                    å®Œäº†
                  {% endif %}
                </button>
              </form>
              <form action="/delete/{{ task[0] }}" method="POST" style="display:inline;">
                <button type="submit">å‰Šé™¤</button>
              </form>
              <form action="/edit/{{ task[0] }}" method="GET" style="display:inline;">
                <button type="submit">ç·¨é›†</button>
              </form>
            </div>
          </li>
          
        {% endfor %}
    </ul>
    

    <!-- ã‚¿ã‚¹ã‚¯è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ  -->
    <form action="/add" method="POST">
        <input type="text" name="content" placeholder="æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›" required><br>
        <input type="date" name="due_date"><br>
        <textarea name="memo" placeholder="ãƒ¡ãƒ¢ã‚’å…¥åŠ›" rows="2" cols="40"></textarea><br>
        <button type="submit">è¿½åŠ </button>
    </form>
    <script>
        function toggleTheme() {
          const body = document.body;
          const btn = document.getElementById("theme-button");
      
          body.classList.toggle("dark");
      
          if (body.classList.contains("dark")) {
            btn.textContent = "ğŸŒ ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰";
            document.cookie = "theme=dark; path=/";
          } else {
            btn.textContent = "ğŸŒ™ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰";
            document.cookie = "theme=light; path=/";
          }
        }
      
        window.onload = function () {
          const savedTheme = document.cookie
            .split("; ")
            .find((row) => row.startsWith("theme="))
            ?.split("=")[1];
      
          if (savedTheme === "dark") {
            document.body.classList.add("dark");
            document.getElementById("theme-button").textContent = "ğŸŒ ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰";
          }
        };
      </script>
      


</body>

</html>